# Multi Module

---

### Module?

모듈은 소스 파일 및 빌드 설정으로 구성된 모음이다. 이를 통해 프로젝트를 별개의 기능 다누이로 분할할 수 있다. 프로젝트에는 하나 이상의 모듈이 포함될 수 있으며, 하나의 모듈이 다른 모듈을 종속 항목으로 사용할 수 있다. 각 모듈은 개별적으로 빌드, 테스트 및 디버그 할 수 있다. (안드로이드 스튜디오에서 새로운 프로젝트를 만들면 생기는 app도 모듈의 한 종류이다.)

### 모듈의 종류

#### 1. Application

안드로이드 프로젝트를 만들 때 기본으로 생성되는 app 모듈은 Application 모듈이다. 빌드의 결과로 APK파일을 생성한다. 앱을 실행하기 위해선 Application모듈이 반드시 필요하다.

#### 2. Android Library

안드로이드 프로젝트에서 지원되는 모든 파일 형식을 포함할 수 있다. 다른 Application 모듈의 종속 항목으로 추가할 수 있다. 빌드의 결과로는 AAR파일이 생성된다.

#### 3. Java or Kotlin Library

Java or Kotlin으로만 이루어진 모듈이다. 안드로이드 프레임워크로부터 독립적인 기능을 구현할 때 사용한다. 빌드의 결과로는 JAR 파일이 생성된다.

### 추가하는 법

안드로이드 스튜디오에서 File -> New -> NEw Module을 누른다음 원하는 모듈을 선택하면 된다.

---

### Mutli Module?

여러 개의 모듈이 모여 동작하는 프로젝트를 의미하며, 보통 특정 기능을 하나의 모듈로 묶어 모듈화를 진행한다. 데이터베이스에 접근하는 DB모듈, View와 ViewModel을 포함하는 Presentation모듈 등이 대표적이다.

### 멀티모듈을 사용해야 하는 이유?

하나의 app 모듈에 모든 기능을 넣어도 문제가 없는데 왜 해야 되는가? -> 간단한 앱이라면 굳이 멀티 모듈로 프로젝트를 구성할 필요는 없다. 하지만 다수의 개발자가 참여하는 큰 사이즈의 프로젝트라면 코드도 굉장히 많고 복잡한 구조를 가지게 된다. 즉, 프로젝트가 커지면 여러가지 문제가 발생할 수 있다.

#### 1. 의존성이 높아질 수 있다.

의존성 규칙을 잘 정해도 app 모듈 안에서 모든 기능을 구현하는 모놀리틱 프로젝트에서는 규칙을 위반하는 실수가 나오기 쉽다. 하나의 액티비티에서 데이터베이스 인스턴스에 접근하여 가져올 수 있는데, 이는 개발자의 실수이긴 하나, 하나의 모듈로 프로젝트가 구성되어 있기 때문에 모든 코드에 접근할 수 있어 생기는 문제이다. 관심사를 분리하려면 의존성 규칙을 잘 지켜주어야 한다. 멀티 모듈 프로젝트에서는 build.gradle 파일에 사용할 모듈의 의존성을 직접 추가해줌으로써 사용하지 않는 모듈들은 접근조차 할 수 없게 된다.

#### 2. 빌드 속다가 늘어난다.

프로젝트 사이즈가 커짐에 따라 빌드 속도가 늘어나는 것은 당연하다. 하지만 멀티 모듈 구조로 프로젝트를 구성하면 빌드 속도를 단축할 수 있다. 그 이유는 프로젝트를 빌드할 때 변경된 모듈만 빌드하기 때문에 모듈이 많을 수록 빌드 시간이 단축 되는 효과를 얻을 수 있다.

![image-20220318171710719](/Users/chan/Library/Application Support/typora-user-images/image-20220318171710719.png)

#### 3. 코드 재사용성

Application 모듈이 여러 개라면 얻을 수 있는 장점이다. 예를 들면, A의 VIew를 B에서도 사용하려고 하면 코드를 통째로 복사하여 가져오게 된다. 이때 View의 문제가 생겨 코드 수정을 해야한다고 하면 A,B모두 수정해야 하는 번거로움이 생긴다. View를 모듈화 시켜 A,B에 사용하게 된다고 하면 문제점이 발견되어도 View만 수정해서 사용하면 되기 때문에 코드 재사용성이 좋아지게 된다.

### 단점

멀티 모듈을 구성 할 때 클래스와 디렉토리가 굉장히 많아져 관리해야 하는 파일들이 많아지고, 특정 파일을 찾을 때 디렉토리 사이에서 방황할 수 있다는 단점이 있다.



### 참조

[1. 멀티 모듈](https://leveloper.tistory.com/201)

[2. 모듈](